<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OST - Omar's Speech Teacher</title>
    <meta name="description" content="Interactive learning platform for speech and language development">
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&family=Poppins:wght@400;500;600;700&display=swap"
        rel="stylesheet">
</head>

<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <span class="logo-icon">üìö</span>
                <span class="logo-text">OST</span>
            </div>
            <div class="nav-links">
                <button class="nav-btn active" data-page="home">
                    <span class="nav-icon">üè†</span>
                    <span>Home</span>
                </button>
                <button class="nav-btn" data-page="stories">
                    <span class="nav-icon">üìñ</span>
                    <span>Stories</span>
                </button>
                <button class="nav-btn" data-page="practice">
                    <span class="nav-icon">üé§</span>
                    <span>Practice</span>
                </button>
                <button class="nav-btn" data-page="quiz">
                    <span class="nav-icon">üéØ</span>
                    <span>Quiz</span>
                </button>
                <button class="nav-btn" data-page="chat">
                    <span class="nav-icon">üí¨</span>
                    <span>Chat</span>
                </button>
                <button class="nav-btn" data-page="recall">
                    <span class="nav-icon">üß†</span>
                    <span>Daily</span>
                </button>
                <button class="nav-btn" id="settings-btn">
                    <span class="nav-icon">‚öôÔ∏è</span>
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Home Page -->
        <section id="home-page" class="page active">
            <div class="hero-section">
                <div class="hero-content">
                    <h1 class="hero-title">
                        Welcome, <span class="highlight">Omar</span>! üåü
                    </h1>
                    <p class="hero-subtitle">
                        Let's learn, read, and speak together!
                    </p>
                    <div class="hero-cards">
                        <div class="hero-card" data-navigate="stories">
                            <div class="card-icon">üìö</div>
                            <h3>Read Stories</h3>
                            <p>Listen and read fun stories</p>
                        </div>
                        <div class="hero-card" data-navigate="practice">
                            <div class="card-icon">üé§</div>
                            <h3>Practice Speaking</h3>
                            <p>Speak and learn new words</p>
                        </div>
                        <div class="hero-card" data-navigate="quiz">
                            <div class="card-icon">üéØ</div>
                            <h3>Take Quiz</h3>
                            <p>Test what you learned</p>
                        </div>
                        <div class="hero-card" data-navigate="chat">
                            <div class="card-icon">üí¨</div>
                            <h3>Chat & Explore</h3>
                            <p>Ask and see new things</p>
                        </div>
                        <div class="hero-card" data-navigate="recall">
                            <div class="card-icon">üß†</div>
                            <h3>Daily Challenge</h3>
                            <p>Remember and write</p>
                        </div>
                    </div>
                </div>
            </div>
            </div>
        </section>

        <!-- Recall / Daily Page -->
        <section id="recall-page" class="page">
            <div class="page-header">
                <h1>üß† Daily Challenge</h1>
                <p>Let's remember what we read!</p>
            </div>

            <div class="recall-container">
                <div id="due-stories-list" class="stories-grid">
                    <!-- Due stories will load here -->
                    <p class="text-center">Loading challenges...</p>
                </div>

                <div id="writing-exercise" class="writing-exercise hidden">
                    <button class="back-btn" id="back-to-recall">‚Üê Back to List</button>

                    <div class="exercise-card">
                        <h3>‚úçÔ∏è Writing Time by <span id="writing-story-title" class="highlight-text">...</span></h3>

                        <div class="prompt-box">
                            <span class="prompt-icon">üí°</span>
                            <p id="writing-prompt">Loading prompt...</p>
                        </div>

                        <div class="keywords-box">
                            <p>Try to use these words:</p>
                            <div id="writing-keywords" class="keywords-list">
                                <!-- Keywords -->
                            </div>
                        </div>
                    </div>

                    <textarea id="writing-input" class="writing-input" placeholder="Type your answer here..."
                        rows="5"></textarea>

                    <div class="writing-controls">
                        <button id="check-writing" class="control-btn primary">
                            <span class="btn-icon">‚ú®</span>
                            <span>Check My Writing</span>
                        </button>
                    </div>

                    <div id="writing-feedback" class="writing-feedback hidden">
                        <h3 id="feedback-title"></h3>
                        <ul id="feedback-list"></ul>
                    </div>
                </div>
            </div>
            </div>
        </section>

        <!-- Stories Page -->
        <section id="stories-page" class="page">
            <div class="page-header">
                <h1>üìñ Story Time</h1>
                <p>Choose a story to read and listen</p>
            </div>

            <!-- Story Generator -->
            <div class="story-generator">
                <h3>‚ú® Create New Story</h3>
                <div class="generator-controls">
                    <div class="generator-row">
                        <input type="text" id="story-topic" class="topic-input"
                            placeholder="Enter a topic (e.g., animals, space, friendship)...">
                        <button id="generate-random-story" class="generate-btn">
                            <span>üé≤</span>
                            <span>Random Story</span>
                        </button>
                    </div>

                    <div class="generator-row">
                        <div class="length-buttons">
                            <span style="color: var(--text-secondary); margin-right: 0.5rem;">Length:</span>
                            <button class="length-btn active" data-length="short">üìù Short (50 words)</button>
                            <button class="length-btn" data-length="medium">üìÑ Medium (100 words)</button>
                            <button class="length-btn" data-length="long">üìö Long (150-180 words)</button>
                        </div>
                    </div>

                    <div class="generator-row">
                        <div class="settings-option">
                            <span style="color: var(--text-secondary); margin-right: 0.5rem;">Voice Speed:</span>
                            <select id="gen-speed" class="form-select"
                                style="background: var(--bg-card); color: var(--text-primary); border: 1px solid var(--border-color); padding: 5px; border-radius: 8px;">
                                <option value="0.6">Slow (0.6x)</option>
                                <option value="0.8" selected>Normal (0.8x)</option>
                                <option value="1.0">Fast (1.0x)</option>
                            </select>
                        </div>
                        <div class="settings-option" style="margin-left: 1rem;">
                            <span style="color: var(--text-secondary); margin-right: 0.5rem;">Language:</span>
                            <select id="gen-language" class="form-select"
                                style="background: var(--bg-card); color: var(--text-primary); border: 1px solid var(--border-color); padding: 5px; border-radius: 8px;">
                                <option value="en" selected>English Only</option>
                                <option value="hi">English + Hindi üáÆüá≥</option>
                                <option value="es">English + Spanish üá™üá∏</option>
                                <option value="fr">English + French üá´üá∑</option>
                                <option value="de">English + German üá©üá™</option>
                            </select>
                        </div>
                    </div>

                    <div class="generator-row" style="justify-content: center;">
                        <button id="generate-topic-story" class="generate-btn">
                            <span>‚ú®</span>
                            <span>Generate Story</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Story Management Controls -->
            <div class="story-management">
                <button id="toggle-select-mode" class="control-btn">
                    <span class="btn-icon">‚òëÔ∏è</span>
                    <span>Manage Stories</span>
                </button>
                <button id="delete-selected" class="control-btn danger hidden">
                    <span class="btn-icon">üóëÔ∏è</span>
                    <span>Delete Selected</span>
                </button>
            </div>

            <div id="stories-list" class="stories-grid">
                <!-- Stories will be loaded here -->
            </div>

            <!-- Story Reader (two layouts: classic and step-by-step) -->
            <div id="story-reader" class="story-reader hidden">
                <div class="story-reader-header">
                    <button class="back-btn" id="back-to-stories">‚Üê Back to Stories</button>
                    <div class="play-mode-row">
                        <span class="play-mode-label">Manual</span>
                        <label class="toggle-switch" title="Manual: you tap Play/Next. Automated: story plays and advances by itself.">
                            <input type="checkbox" id="play-mode-auto" aria-label="Automated play">
                            <span class="toggle-slider"></span>
                        </label>
                        <span class="play-mode-label">Automated</span>
                    </div>
                </div>

                <!-- Classic layout: one image, full story, play/pause -->
                <div id="story-reader-classic" class="story-reader-layout">
                    <div class="story-image-container">
                        <img id="story-image" src="" alt="Story Image" class="story-image">
                    </div>
                    <div class="story-content">
                        <h2 id="story-title" class="story-title"></h2>
                        <div class="story-controls">
                            <button id="play-story" class="control-btn primary">
                                <span class="btn-icon">‚ñ∂Ô∏è</span>
                                <span>Play English</span>
                            </button>
                            <button id="play-translation" class="control-btn secondary hidden">
                                <span class="btn-icon">üó£Ô∏è</span>
                                <span>Play Translation</span>
                            </button>
                            <button id="pause-story" class="control-btn" style="display: none;">
                                <span class="btn-icon">‚è∏Ô∏è</span>
                                <span>Pause</span>
                            </button>
                            <button id="stop-story" class="control-btn">
                                <span class="btn-icon">‚èπÔ∏è</span>
                                <span>Reset</span>
                            </button>
                        </div>
                        <div class="story-layout-container">
                            <div class="story-main-column">
                                <div id="story-text" class="story-text"></div>
                                <div id="story-moral" class="story-moral hidden">
                                    <h3>üåü Moral of the Story</h3>
                                    <p id="moral-text"></p>
                                </div>
                            </div>
                            <div class="story-sidebar-column">
                                <div id="story-vocab" class="story-vocab hidden">
                                    <h3>üìö New Words</h3>
                                    <div id="vocab-list" class="vocab-list-vertical"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step-by-step layout: one sentence + image at a time, Back/Next, language choice -->
                <div id="story-reader-step" class="story-reader-layout hidden">
                    <div id="step-language-choice" class="step-language-choice hidden">
                        <p class="step-language-prompt">Listen to the story in:</p>
                        <div class="step-language-buttons">
                            <button id="step-listen-english" class="control-btn primary">Listen in English</button>
                            <button id="step-listen-translation" class="control-btn secondary hidden">Listen in <span id="step-translation-lang">Hindi</span></button>
                        </div>
                    </div>
                    <div class="step-by-step-viewport">
                        <h2 id="step-story-title" class="step-story-title"></h2>
                        <div class="step-image-container">
                            <img id="step-sentence-image" src="" alt="Sentence illustration" class="step-sentence-image">
                            <div id="step-image-placeholder" class="step-image-placeholder">üñºÔ∏è</div>
                        </div>
                        <div class="step-text-container">
                            <h3 id="step-moral-heading" class="step-moral-heading hidden">Moral of the Story</h3>
                            <p id="step-sentence-text" class="step-sentence-text"></p>
                            <p id="step-sentence-translation" class="step-sentence-translation hidden"></p>
                        </div>
                        <div id="step-controls-nav" class="step-controls">
                            <button id="step-back" class="control-btn hidden">
                                <span class="btn-icon">‚¨ÖÔ∏è</span>
                                <span>Back</span>
                            </button>
                            <button id="step-play-sentence" class="control-btn primary hidden">
                                <span class="btn-icon">‚ñ∂Ô∏è</span>
                                <span>Play</span>
                            </button>
                            <button id="step-play-translation" class="control-btn secondary hidden">
                                <span class="btn-icon">üó£Ô∏è</span>
                                <span>Play translation</span>
                            </button>
                            <button id="step-next" class="control-btn primary">
                                <span>Next</span>
                                <span class="btn-icon">‚û°Ô∏è</span>
                            </button>
                        </div>
                        <div id="step-controls-end" class="step-controls hidden">
                            <button id="step-back-to-stories" class="control-btn primary">
                                <span class="btn-icon">üìö</span>
                                <span>Back to Stories</span>
                            </button>
                        </div>
                        <div id="step-progress" class="step-progress"></div>
                    </div>
                </div>
            </div>
            </div>
            </div>
        </section>

        <!-- Practice Page -->
        <section id="practice-page" class="page">
            <div class="page-header">
                <h1>üé§ Speaking Practice</h1>
                <p>Read the sentence and speak it out loud</p>
            </div>

            <div class="practice-container">
                <div class="practice-card">
                    <div class="practice-sentence" id="practice-sentence">
                        Click "Start Practice" to begin
                    </div>

                    <div class="practice-controls">
                        <button id="start-practice" class="control-btn primary">
                            <span class="btn-icon">üéØ</span>
                            <span>Start Practice</span>
                        </button>
                        <button id="listen-sentence" class="control-btn">
                            <span class="btn-icon">üîä</span>
                            <span>Listen</span>
                        </button>
                        <button id="record-speech" class="control-btn record-btn">
                            <span class="btn-icon">üé§</span>
                            <span>Record Your Voice</span>
                        </button>
                    </div>

                    <div id="practice-feedback" class="practice-feedback hidden">
                        <!-- Feedback will appear here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Quiz Page -->
        <section id="quiz-page" class="page">
            <div class="page-header">
                <h1>üéØ Quiz Time</h1>
                <p>Answer questions about the stories</p>
            </div>

            <div class="quiz-container">
                <!-- Step 1: Select Story -->
                <div id="quiz-story-selection">
                    <h3>Select a story to take a quiz:</h3>
                    <div id="quiz-stories-list" class="stories-grid">
                        <!-- Loaded via JS -->
                    </div>
                </div>

                <!-- Step 2: Question Interface -->
                <div id="quiz-interface" class="hidden">
                    <button class="back-btn" id="quit-quiz">‚ùå Quit Quiz</button>

                    <div class="quiz-card">
                        <div class="quiz-progress">
                            Question <span id="quiz-current-num">1</span> of <span id="quiz-total-num">3</span>
                        </div>

                        <h2 id="quiz-question" class="quiz-question">...</h2>

                        <div id="quiz-options" class="quiz-options">
                            <!-- Options buttons -->
                        </div>

                        <div id="quiz-feedback" class="quiz-feedback hidden">
                            <div class="feedback-content">
                                <span id="feedback-icon"></span>
                                <h3 id="feedback-title"></h3>
                                <p id="feedback-message"></p>
                            </div>
                            <button id="quiz-next-btn" class="control-btn primary">
                                <span>Next Question</span>
                                <span class="btn-icon">‚û°Ô∏è</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Step 3: Results -->
                <div id="quiz-results" class="hidden">
                    <div class="results-card text-center">
                        <div class="results-icon">üèÜ</div>
                        <h2>Quiz Complete!</h2>
                        <div class="score-display">
                            You got <span id="quiz-score">0</span> correct!
                        </div>
                        <p id="quiz-encouragement"></p>
                        <button id="quiz-home-btn" class="control-btn primary">
                            <span>Back to Stories</span>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Chat Page -->
        <section id="chat-page" class="page">
            <div class="page-header">
                <h1>üí¨ Chat & Explore</h1>
                <p>Ask to see animals, vehicles, and more!</p>
            </div>

            <div class="chat-container">
                <div class="chat-image-area" id="chat-image-area">
                    <div class="chat-placeholder">
                        <span class="placeholder-icon">üñºÔ∏è</span>
                        <p>Ask me to show you something!</p>
                        <p class="placeholder-hint">Try: "Show me a dog" or "Show me a car"</p>
                    </div>
                </div>

                <div class="chat-explanation" id="chat-explanation">
                    <!-- Explanation will appear here -->
                </div>

                <div class="chat-input-area">
                    <input type="text" id="chat-input" class="chat-input" placeholder="Type what you want to see...">
                    <button id="chat-send" class="chat-send-btn">
                        <span>Show Me</span>
                        <span class="btn-icon">‚ú®</span>
                    </button>
                </div>

                <div class="chat-suggestions">
                    <p>Try these:</p>
                    <button class="suggestion-chip" data-prompt="show me a dog">üêï Dog</button>
                    <button class="suggestion-chip" data-prompt="show me a car">üöó Car</button>
                    <button class="suggestion-chip" data-prompt="show me an apple">üçé Apple</button>
                    <button class="suggestion-chip" data-prompt="show me a tree">üå≥ Tree</button>
                </div>
            </div>
        </section>
    </main>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="fun-loader"></div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Settings</h2>
                <button class="control-btn" id="close-settings">‚ùå</button>
            </div>

            <div class="settings-body">
                <!-- LLM Settings -->
                <div class="settings-group">
                    <h3>Story Engine (AI)</h3>
                    <div class="settings-options-grid" id="llm-options">
                        <!-- Items injected by JS -->
                    </div>
                </div>

                <!-- TTS Settings -->
                <div class="settings-group">
                    <h3>Voice (TTS)</h3>
                    <div class="settings-options-grid" id="tts-options">
                        <!-- Items injected by JS -->
                    </div>
                </div>

                <!-- Voice Preset -->
                <div class="settings-group">
                    <h3>Voice Tone</h3>
                    <div class="settings-options-grid" id="voice-preset-options">
                        <div class="settings-option selected" data-value="default">
                            <span class="option-label">Child Friendly (Soft)</span>
                        </div>
                        <div class="settings-option" data-value="ana">
                            <span class="option-label">Ana (Sweet)</span>
                        </div>
                        <div class="settings-option" data-value="aria">
                            <span class="option-label">Aria (Clear)</span>
                        </div>
                        <div class="settings-option" data-value="guy">
                            <span class="option-label">Guy (Male)</span>
                        </div>
                    </div>
                </div>

                <!-- Story Tone -->
                <div class="settings-group">
                    <h3>Story Style</h3>
                    <div class="settings-options-grid" id="tone-options">
                        <div class="settings-option selected" data-value="default">
                            <span class="option-label">Normal</span>
                        </div>
                        <div class="settings-option" data-value="happy">
                            <span class="option-label">Super Happy</span>
                        </div>
                        <div class="settings-option" data-value="calm">
                            <span class="option-label">Calm & Gentle</span>
                        </div>
                        <div class="settings-option" data-value="funny">
                            <span class="option-label">Silly & Funny</span>
                        </div>
                    </div>
                </div>

                <!-- Reader Layout -->
                <div class="settings-group">
                    <h3>Reader Layout</h3>
                    <div class="settings-options-grid" id="reader-layout-options">
                        <div class="settings-option selected" data-value="classic">
                            <span class="option-label">Classic</span>
                            <span style="font-size: 0.8rem; color: var(--text-secondary);">One image, full story, auto-play</span>
                        </div>
                        <div class="settings-option" data-value="step_by_step">
                            <span class="option-label">Step-by-step</span>
                            <span style="font-size: 0.8rem; color: var(--text-secondary);">One sentence at a time, kid clicks Next</span>
                        </div>
                    </div>
                </div>

            </div>

            <div class="text-center mt-3">
                <button id="save-settings-btn" class="control-btn primary">Save Changes</button>
            </div>
        </div>
    </div>

    <script src="/js/app.js"></script>
</body>

</html>